# Zullang

한글 줄임말로 된 프로그래밍 언어 "줄랭" (줄임말 랭귀지)

줄랭은 C/C++과 내부 구조가 비슷한 저수준 언어입니다. 하지만 문법은 파이썬에 가깝게 단순합니다.   
줄임말 랭귀지라는 이름답게, 자주 쓰는 키워드는 모두 짧은 줄임말로 되어 있어 빠르게 타이핑이 가능합니다.   
타입의 경우엔 완전한 이름을 가지고 있지만, 정적 타입 추론을 적극적으로 도입하여 타입을 명시해야 하는 경우를 가능한 줄였습니다.

줄랭의 목적은 간단한 문법으로 C/C++의 강력한 인프라를 활용하는 것입니다.   
줄랭은 LLVM을 기반으로 동작하기 때문에, C/C++과 사실상 100% 상호 호환이 가능합니다.   
일단 한 번 컴파일 되기만 하면, 서로가 서로의 코드를 링킹할 수 있습니다.

주의사항:
- 줄랭은 알파 단계에 있습니다. 컴파일러에 대한 깊은 지식 없이 단기간에 개발되었고, 개발자도 알지 못하는 버그와 미스컴파일링 가능성이 난무합니다.
- 아직 함수 오버로딩과 이름 맹글링이 개발되지 않아서 C코드만 호환이 가능합니다.

| 키워드 | 의미               |
|-----|------------------|
| ㅎㅇ  | 구조체, 함수 정의       |
| ㄱㄱ  | 반복문 정의 (for)     |
| ㅇㅈ? | 조건문 정의 (if)      |
| ㄴㄴ? | 조건문 정의 (else if) |
| ㄴㄴ  | 조건문 정의 (else)    |
| ㅈㅈ  | 함수 반환 (return)   |
| ㅅㄱ  | 반복문 정지 (break)   |
| ㅌㅌ  | 다음 반복 (continue) |
| ㄲ   | 표준 입력 객체 (cin)   |
| ㄸ   | 표준 출력 객체 (cout)  |

| 타입 이름 | 의미      |
|-------|---------|
| 논리    | 1비트 정수  |
| 글자    | 8비트 정수  |
| 수     | 64비트 정수 |
| 소수    | 64비트 실수 |
| 글     | 문자열     |

**ㅎㅇ 키워드:** (하이)

함수 또는 구조체를 정의할 때 사용하는 키워드입니다.   
아래처럼 ()를 사용하면 함수, 그렇지 않으면 구조체입니다.

- ㅎㅇ 함수이름():
- ㅎㅇ 구조체이름:

아래처럼 리턴 타입을 명시할 수 있습니다. 명시하지 않으면 기본적으로 void로 인식됩니다.
함수 몸체에 반환문이 있으면 해당 반환문을 바탕으로 리턴 타입이 추론됩니다.

- ㅎㅇ 함수이름() 수:

함수 선언만 하고 싶다면 함수 프로토타입 끝에 콜론을 쓰지 않으면 됩니다.

- ㅎㅇ 함수이름() 글자
- ㅎㅇ 함수이름()

**ㄱㄱ 키워드:** (고고)

반복문을 정의할 때 사용하는 키워드입니다.   
go언어의 for문처럼 다양한 형태로 사용 가능합니다.

- ㄱㄱ ㅂ = 1; ㅂ < 10; ㅂ+=1:   
  일반적인 반복문
- ㄱㄱ ㅂ < 10:   
  while문처럼 사용 가능
- ㄱㄱ :   
  아무것도 넣지 않으면 무한루프

**ㅇㅈ?, ㄴㄴ?, ㄴㄴ 키워드:** (인정?, 노노?, 노노)

조건문을 정의할 때 사용하는 키워드입니다. 각각 if, else if, else에 대응합니다.

**ㅈㅈ, ㅅㄱ, ㅌㅌ 키워드:** (GG, 수고, 튀튀)

ㅈㅈ는 return, ㅅㄱ는 break, ㅌㅌ는 continue의 의미를 가집니다.

**ㄲ,ㄸ 객체:**

각각 C++의 cin, cout에 대응하는 객체입니다.  
ㄲ은 >> 연산자를 통해 입력을 받고, ㄸ은 << 연산자를 통해 출력을 합니다.

이름이 ㄲ,ㄸ인 이유는 타이핑을 쉽게 하기 위함입니다.

## 코드 예시:

``` 
ㅎㅇ 점:
    좌표1: 수
    좌표2: 수
    ㅎㅇ 점(나, ㅇ1: 수, ㅇ2: 수):
        나.좌표1 = ㅇ1
        나.좌표2 = ㅇ2
    
    ㅎㅇ 합(나): //"나" 매개변수로 파이썬처럼 self명시
        ㅈㅈ 나.좌표1 + 나.좌표2 //ㅈㅈ로 반환

ㅎㅇ 계산(ㄱ: 수, ㄴ: 수) 수: //반환 타입 명시 가능
    ㅈㅈ ㄱ + ㄴ

ㅎㅇ 시작():
    ㅂ1 = 10
    ㅂ2 = 10
    점1 = 점(ㅂ1, ㅂ2)
    ㄸ << 계산(ㅂ1, ㅂ2) << ' ' //출력
    ㄸ << 점1.합()
    
    ㄱㄱ ㅂ = 0; ㅂ < 10; ㅂ+=1:
        ㅇㅈ? ㅂ == 3:
            ㅌㅌ
        ㅇㅈ? ㅂ % 2 == 0:
            ㄸ << "2의 배수"
        ㄴㄴ? ㅂ % 3 == 0:
            ㄸ << "3의 배수"
            ㅅㄱ
        ㄴㄴ:
            ㄸ << "나머지"
            
    배열 = [1, 2, 3, 4, 5]
    문자열: 글
    ㄲ >> 문자열
    ㄸ << 문자열
```

## 현재 문제:

**윈도우 cp949 지원 문제**

윈도우 cmd의 한글 인코딩(cp949)과 일반적인 파일 인코딩(utf8)이 맞지 않아
파일 경로 탐색, 에러 메시지 출력, 구문 분석 등의 인코딩이 모두 다른 문제가 있습니다.

*줄랭 컴파일러는 모든 인코딩을 utf-8로 강제합니다.*

따라서 실행 전에 터미널에서 "chcp 65001" 을 실행해 터미널 인코딩을 utf-8로 바꿔주어야 합니다. 또는 윈도우 시스템 로켈을 utf8로 설정해 인코딩을 utf8로 통일해주어야지 정상적으로 작동합니다.

**전역 변수 초기화 문제**

C/C++이 그러하듯, 전역 변수를 초기화 하기 위해선 상수 표현식이 필요합니다.   
하지만 줄랭에는 const가 존재하지 않고, 줄랭 컴파일러 역시 상수 표현식을 구분하지 못합니다.   
이 때문에 전역 변수를 선언과 동시에 초기화 할 수 없고, 오로지 선언만 할 수 있습니다. (0으로 자동 초기화는 됩니다)

**함수 리턴 타입 추론 문제**

줄랭은 정적 타입 추론을 지원합니다.   
하지만, 이 타입 추론 시스템의 구조적 문제로 인해 함수의 프로토타입이 생성된 이후, 함수의 몸체를 평가할 때 리턴 타입이 추론됩니다. 한 번 생성된 프로토타입은 수정할 수 없기 때문에, 리턴 타입 추론이 불가능합니다.

이 문제가 해결되기 전까지는 함수의 리턴 타입을 직접 명시해야 합니다.

**컴파일 경고 문제**

줄랭에는 컴파일 경고가 존재하지 않고, 컴파일 에러만 존재합니다. 이 때문에 암묵적 다운캐스팅처럼 실수를 범할 수 있는 부분을 사용자가 전혀 눈치채지 못할 수 있습니다.


## 줄랭 컴파일러

줄랭은 LLVM을 기반으로 동작합니다. 이 레포지토리에 있는 컴파일러는 줄랭을 LLVM IR코드로(zul to ll) 변환하는 컴파일러 프론트엔드입니다.
따라서 네이티브 컴파일을 하기 위해선 추가적인 LLVM 도구들이 필요합니다.

줄랭 컴파일러는 JIT기능을 내장하고 있어 코드를 즉시 실행할 수 있습니다. 대부분의 경우에 이 기능으로 실행하길 권장합니다.

만약 바이너리 실행 파일을 얻고 싶다면 줄랭 컴파일러로부터 얻은 IR코드를 컴파일하기만 하면 됩니다.   
llc, lld등의 IR코드를 위한 도구가 있지만, 이를 모두 내장하고 있는 clang을 사용하는 것이 가장 편리합니다. ll코드를 clang에게 넘겨주기만 하면 됩니다.

추후에 줄랭 컴파일러만으로 바이너리 컴파일이 가능하도록 어셈블러, 링커 등을 플랫폼에 맞게 번들로 묶어 배포하도록 하겠습니다.

## 문법 지원 현황

| 문법            | 상태    |
|---------------|-------|
| 산술 연산         | 지원    |
| 논리 연산         | 지원    |
| 지역 변수         | 지원    |
| 전역 변수         | 지원    |
| ㅈㅈ문           | 지원    |
| ㄱㄱ문           | 지원 예정 |
| ㅌㅌ문           | 지원 예정 |
| ㅅㄱ문           | 지원 예정 |
| ㅇㅈ문           | 지원 예정 |
| 전역 변수 초기화     | 지원 예정 |
| 암시적 형변환       | 지원    |
| 명시적 형변환       | 지원 예정 |
| 함수            | 지원    |
| 함수 반환 타입 추론   | 지원 예정 |
| 배열            | 지원 예정 |
| 함수 오버로딩       | 지원 예정 |
| 연산자 오버로딩      | 지원 예정 |
| 참조자           | 지원 예정 |
| 포인터           | 미정    |
| 클래스           | 지원 예정 |
| 상속            | 미정    |
| 다중 상속         | 미정    |
| 가상 상속         | 미정    |
| 가상 함수         | 미정    |
| 템플릿           | 미정    |
| 동적 할당         | 미정    |
| 삼항 연산자        | 미정    |
| static, const | 미정    |
| 리터럴 셋         | 지원 예정 |
| 리터럴 맵         | 지원 예정 |